<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Omar App Store</title>

<!-- Firebase v10 Modular -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push, get, child } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "PASTE_API_KEY",
  authDomain: "PASTE_AUTH_DOMAIN",
  databaseURL: "PASTE_DATABASE_URL",
  projectId: "PASTE_PROJECT_ID",
  storageBucket: "PASTE_BUCKET",
  messagingSenderId: "PASTE_SENDER_ID",
  appId: "PASTE_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Login function
window.login = function () {
    const inputPass = document.getElementById("pass").value;

    get(child(ref(db), "apps/admin/password")).then((snapshot) => {
        if (snapshot.exists()) {
            const realPass = snapshot.val();
            if (inputPass === realPass) {
                document.getElementById("loginBox").style.display = "none";
                document.getElementById("adminPanel").style.display = "block";
            } else {
                alert("Wrong Password");
            }
        }
    });
};

// Add App function
window.addApp = function () {
    const appData = {
        name: document.getElementById("name").value,
        description: document.getElementById("desc").value,
        version: document.getElementById("version").value,
        icon: document.getElementById("icon").value,
        download: document.getElementById("download").value,
        category: document.getElementById("category").value
    };

    push(ref(db, "apps"), appData).then(() => {
        alert("‚úÖ App Added Successfully");
        document.querySelectorAll("#adminPanel input").forEach(i => i.value = "");
    });
};
</script>

<style>
body{
    font-family: Arial;
    background:#f4f4f4;
    padding:20px;
}
h2{
    text-align:center;
}
input, select{
    width:100%;
    padding:10px;
    margin:8px 0;
    border-radius:6px;
    border:1px solid #ccc;
}
button{
    width:100%;
    padding:12px;
    background:#0088cc;
    color:white;
    border:none;
    border-radius:6px;
    font-size:16px;
}
</style>
</head>

<body>

<!-- üîê Login Box -->
<div id="loginBox">
    <h2>üîê Admin Login</h2>
    <input type="password" id="pass" placeholder="Enter Password">
    <button onclick="login()">Login</button>
</div>

<!-- ‚ûï Admin Panel -->
<div id="adminPanel" style="display:none;">
    <h2>‚ûï Add New App</h2>

    <input id="name" placeholder="App Name">
    <input id="desc" placeholder="Description">
    <input id="version" placeholder="Version">
    <input id="icon" placeholder="Icon Image Raw URL">
    <input id="download" placeholder="APK Download Link">

    <select id="category">
      <option value="video">Video Editor</option>
      <option value="photo">Photo Editor</option>
      <option value="tools">Tools</option>
      <option value="games">Games/Fun</option>
    </select>

    <button onclick="addApp()">Add App</button>
</div>

</body>
</html>
